# Mail Mind ‚Äî Android Deployment Guide

## üéØ PART 1 ‚Äî ANDROID PROJECT CONFIG VERIFICATION

### Current Configuration Status: ‚úÖ VERIFIED

The Android project is correctly configured for device deployment:

#### 1. SDK Versions (android/app/build.gradle.kts)
```kotlin
minSdk = flutter.minSdkVersion          // Uses Flutter's default (typically 21)
targetSdk = flutter.targetSdkVersion    // Uses Flutter's default (latest)
compileSdk = flutter.compileSdkVersion  // Uses Flutter's default
```
‚úÖ **Status:** Correct. Flutter manages these automatically.

#### 2. Application ID (android/app/build.gradle.kts)
```kotlin
applicationId = "com.example.mail_mind"
```
‚úÖ **Status:** Correct. Unique identifier for the app.

#### 3. Keystore & Signing (android/app/build.gradle.kts)
```kotlin
buildTypes {
    release {
        signingConfig = signingConfigs.getByName("debug")
    }
}
```
‚úÖ **Status:** Correct. Debug keystore is auto-generated by Android SDK.

#### 4. AndroidManifest.xml (android/app/src/main/AndroidManifest.xml)
```xml
<activity
    android:name=".MainActivity"
    android:exported="true"
    ...>
```
‚úÖ **Status:** Correct. `android:exported="true"` allows app to be launched externally (by flutter run).

#### 5. Build Configuration (android/gradle.properties)
```properties
org.gradle.jvmargs=-Xmx8G -XX:MaxMetaspaceSize=4G
android.useAndroidX=true
android.enableJetifier=true
```
‚úÖ **Status:** Optimal. Supports large projects with AndroidX.

### Summary
All Android configurations are correct and ready for device deployment.

---

## üéØ PART 2 ‚Äî DEVICE DETECTION & AUTO-INSTALL

### Device Requirements
- Android phone with API 21+ (Android 5.0+)
- USB cable or WiFi network connection
- Developer Options enabled
- USB Debugging enabled

### Automatic Device Detection
The provided scripts automatically:
1. Detect all connected Android devices
2. Select the first available device
3. Build the APK
4. Install on the device
5. Launch the app

### Command: flutter devices
This lists all connected devices:
```bash
flutter devices
```

**Output example:**
```
ASUS Android Device  ‚Ä¢ 192.168.1.100:5555 ‚Ä¢ android ‚Ä¢ Android 12 (API 31)
```

The script extracts the device ID (first column) and uses it for installation.

---

## üéØ PART 3 ‚Äî HELPER SCRIPTS

### Bash Script: run_on_device.sh

**Location:** `mail_mind/run_on_device.sh`

**How it works:**
1. Runs `flutter devices` to detect connected devices
2. Extracts the first Android device ID
3. Builds APK using `flutter build apk`
4. Installs APK using `flutter install -d <deviceId>`
5. Launches the app using `flutter run -d <deviceId>`

**Usage:**

```bash
# Debug mode (default)
./run_on_device.sh

# Release mode
./run_on_device.sh --release

# Verbose output (show all logs)
./run_on_device.sh --verbose

# Release + verbose
./run_on_device.sh --release --verbose
```

**What each step does:**
- **[1/4] Detecting devices:** Finds connected Android devices via `flutter devices`
- **[2/4] Building:** Compiles Dart ‚Üí Kotlin ‚Üí APK using Gradle
- **[3/4] Installing:** Pushes APK to device and installs it
- **[4/4] Launching:** Starts the app and shows live logs

**Troubleshooting:**
- If no device detected: Connect via USB, enable USB debugging
- If build fails: Check `flutter doctor`, ensure SDK is installed
- If install fails: Clear app data: `adb shell pm clear com.example.mail_mind`

---

### PowerShell Script: run_on_device.ps1

**Location:** `mail_mind/run_on_device.ps1`

**How it works:**
Same as bash script, but for Windows PowerShell.

**Usage:**

```powershell
# Debug mode (default)
.\run_on_device.ps1

# Release mode
.\run_on_device.ps1 -Release

# Verbose output
.\run_on_device.ps1 -Verbose

# Release + verbose
.\run_on_device.ps1 -Release -Verbose
```

**If you get "execution policy" error:**
```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

Then try again.

---

## üéØ PART 4 ‚Äî MANUAL COMMANDS

### Check Connected Devices
```bash
flutter devices
```

### Build APK (debug)
```bash
flutter build apk
```

### Build APK (release)
```bash
flutter build apk --release
```

### Install on Device (after building)
```bash
flutter install -d <deviceId>
```

**Example:**
```bash
flutter install -d ASUS\ Android\ Device
```

### Run on Device (build + install + run)
```bash
flutter run -d <deviceId>
```

### Run in Release Mode
```bash
flutter run -d <deviceId> --release
```

### Clear App Data on Device
```bash
adb shell pm clear com.example.mail_mind
```

### View Live Logs
```bash
flutter logs -d <deviceId>
```

### Uninstall App from Device
```bash
flutter uninstall -d <deviceId>
```

---

## üöÄ QUICK START PATHS

### Path 1: Using Bash Script (macOS/Linux)
```bash
cd ~/path/to/mail_mind
chmod +x run_on_device.sh
./run_on_device.sh
```

### Path 2: Using PowerShell (Windows)
```powershell
cd "C:\Users\ASUS\Desktop\Hackathon\mail_mind"
.\run_on_device.ps1
```

### Path 3: Manual Commands (Any Platform)
```bash
flutter devices                          # Find device ID
flutter run -d <deviceId>               # Build, install, run
```

---

## üìã SETUP: USB Debugging on Android Phone

1. **Open Developer Options:**
   - Settings ‚Üí About Phone
   - Tap "Build Number" 7 times
   - Back ‚Üí System ‚Üí Developer Options

2. **Enable USB Debugging:**
   - Developer Options ‚Üí USB Debugging (toggle ON)

3. **Connect Phone via USB**
   - Use original cable or high-quality cable
   - Allow permission when prompted

4. **Verify Connection:**
   ```bash
   adb devices
   ```
   Should show: `<device-id> device`

5. **Run:**
   ```bash
   ./run_on_device.sh    # (Linux/macOS)
   .\run_on_device.ps1   # (Windows)
   ```

---

## üìã SETUP: WiFi Debugging (Optional)

If you don't want to use USB:

1. **Enable Wireless Debugging:**
   - Developer Options ‚Üí Wireless Debugging (toggle ON)

2. **Get Phone IP:**
   - Wireless Debugging ‚Üí Pair with code (note IP and port)

3. **Connect via adb:**
   ```bash
   adb connect <phone-ip>:5555
   ```

4. **Run:**
   ```bash
   ./run_on_device.sh
   .\run_on_device.ps1
   ```

---

## ‚úÖ SUCCESS CHECKLIST

- [ ] Android phone connected via USB or WiFi
- [ ] USB Debugging enabled on phone
- [ ] `flutter devices` shows your phone
- [ ] Run `./run_on_device.sh` or `.\run_on_device.ps1`
- [ ] APK builds successfully
- [ ] APK installs on device
- [ ] App launches and shows email list (no crashes)
- [ ] Can interact with app (view emails, navigate screens)

---

## üÜò TROUBLESHOOTING

### "No Android device detected"
**Problem:** Script runs but says no device found.

**Solutions:**
1. Check USB connection (try different cable)
2. Check USB Debugging is enabled: Settings ‚Üí Developer Options ‚Üí USB Debugging
3. Allow permission when prompted on phone
4. Reconnect USB
5. Run `adb devices` to verify connection

### "Build failed"
**Problem:** APK build fails.

**Solutions:**
1. Run `flutter doctor` to check setup
2. Run `flutter clean && flutter pub get`
3. Try manual build: `flutter build apk --verbose`
4. Check Java version: `java -version` (should be 11+)

### "Installation failed"
**Problem:** APK built but won't install.

**Solutions:**
1. Clear app data: `adb shell pm clear com.example.mail_mind`
2. Uninstall previous version: `flutter uninstall -d <deviceId>`
3. Ensure enough storage on phone (2+ GB free)
4. Try release build: `flutter run -d <deviceId> --release`

### "App crashes on launch"
**Problem:** App installs but crashes immediately.

**Solutions:**
1. Check logs: `flutter logs -d <deviceId>`
2. Ensure all permissions are granted (Gmail access, etc.)
3. Check `priority_classifier.tflite` exists in assets (if using ML)
4. Try debug build instead of release

### "Device not found when running script"
**Problem:** `flutter devices` works but script says no device.

**Solutions:**
1. Check script is using correct device ID format
2. Run `flutter devices` manually to see exact ID
3. Use manual command: `flutter run -d "<exact-id>"`
4. Check for spaces in device ID (quote if present)

---

## üìä Build & APK Information

### Debug APK
- **Location:** `build/app/outputs/flutter-apk/app-debug.apk`
- **Size:** 50-100 MB
- **Speed:** Faster to build
- **Use:** Development and testing

### Release APK
- **Location:** `build/app/outputs/flutter-apk/app-release.apk`
- **Size:** 20-40 MB (smaller, optimized)
- **Speed:** Slower to build
- **Use:** Production, final testing

Both are signed with debug keystore (acceptable for development).

---

## üì± Device Information

View device details:
```bash
adb shell getprop ro.build.version.android    # Android version
adb shell getprop ro.build.version.sdk        # API level
adb shell getprop ro.product.model             # Device model
adb shell getprop ro.product.brand             # Brand
```

---

## üîó Related Documentation

- **Flutter Run Reference:** https://flutter.dev/docs/deployment/android
- **adb Documentation:** https://developer.android.com/studio/command-line/adb
- **Android Developer Options:** https://developer.android.com/studio/debug/dev-options
- **Gradle Configuration:** https://flutter.dev/to/review-gradle-config

---

## üìù FINAL SUMMARY

**To run on your Android device:**

1. **Connect phone via USB (or enable WiFi debugging)**
2. **Run one command:**
   ```bash
   # Linux/macOS
   ./run_on_device.sh
   
   # Windows PowerShell
   .\run_on_device.ps1
   
   # Manual (any platform)
   flutter run -d <deviceId>
   ```

That's it! The app will build, install, and run automatically.

---

**Status:** ‚úÖ Ready for deployment

**Last Updated:** December 11, 2025
